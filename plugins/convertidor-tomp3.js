import { toAudio } from '../lib/converter.js' 
let handler = async (m, { conn, usedPrefix, command }) => {
let q = m.quoted ? m.quoted : m
let mime = (m.quoted ? m.quoted : m.msg).mimetype || ''
if (!/video|audio/.test(mime)) throw `${lenguajeGB['smsAvisoMG']()}*ğ—¥ğ—˜ğ—¦ğ—£ğ—¢ğ—¡ğ——ğ—” ğ—” ğ—¨ğ—¡ ğ—©ğ—œğ——ğ—˜ğ—¢ ğ—¢ ğ—¡ğ—¢ğ—§ğ—” ğ——ğ—˜ ğ—©ğ—¢ğ—­ ğ—£ğ—”ğ—¥ğ—” ğ—–ğ—¢ğ—¡ğ—©ğ—˜ğ—¥ğ—§ğ—œğ—¥ ğ—˜ğ—¡ ğ—”ğ—¨ğ——ğ—œğ—¢ ğ— ğ—£3*\n\n*ğ—¥ğ—˜ğ—£ğ—Ÿğ—¬ ğ—§ğ—¢ ğ—”ğ—¡ ğ—©ğ—œğ——ğ—˜ğ—¢ ğ—¢ğ—¥ ğ—©ğ—¢ğ—œğ—–ğ—˜ ğ— ğ—˜ğ— ğ—¢ ğ—§ğ—¢ ğ—–ğ—¢ğ—¡ğ—©ğ—˜ğ—¥ğ—§ ğ—œğ—¡ğ—§ğ—¢ ğ—”ğ—¨ğ——ğ—œğ—¢ ğ— ğ—£3*`
await conn.sendPresenceUpdate('recording', m.chat)
let media = await q.download?.()
if (!media && !/video/.test(mime)) throw `${lenguajeGB['smsAvisoFG']()}*ğ—¡ğ—¢ ğ—¦ğ—˜ ğ—Ÿğ—¢ğ—šğ—¥ğ—¢ ğ——ğ—˜ğ—¦ğ—–ğ—”ğ—¥ğ—šğ—”ğ—¥ ğ—˜ğ—Ÿ ğ—©ğ—œğ——ğ—˜ğ—¢, ğ—œğ—¡ğ—§ğ—˜ğ—¡ğ—§ğ—˜ ğ—¡ğ—¨ğ—˜ğ—©ğ—”ğ— ğ—˜ğ—¡ğ—§ğ—˜ ğ—£ğ—¢ğ—¥ ğ—™ğ—”ğ—©ğ—¢ğ—¥*\n\n*ğ—¨ğ—¡ğ—”ğ—•ğ—Ÿğ—˜ ğ—§ğ—¢ ğ——ğ—¢ğ—ªğ—¡ğ—Ÿğ—¢ğ—”ğ—— ğ—§ğ—›ğ—˜ ğ—©ğ—œğ——ğ—˜ğ—¢, ğ—§ğ—¥ğ—¬ ğ—”ğ—šğ—”ğ—œğ—¡ ğ—£ğ—Ÿğ—˜ğ—”ğ—¦ğ—˜*`
if (!media && !/audio/.test(mime)) throw `${lenguajeGB['smsAvisoFG']()}*ğ—¡ğ—¢ ğ—¦ğ—˜ ğ—Ÿğ—¢ğ—šğ—¥ğ—¢ ğ——ğ—˜ğ—¦ğ—–ğ—”ğ—¥ğ—šğ—”ğ—¥ ğ—Ÿğ—” ğ—¡ğ—¢ğ—§ğ—” ğ——ğ—˜ ğ—©ğ—¢ğ—­, ğ—œğ—¡ğ—§ğ—˜ğ—¡ğ—§ğ—˜ ğ—¡ğ—¨ğ—˜ğ—©ğ—”ğ— ğ—˜ğ—¡ğ—§ğ—˜ ğ—£ğ—¢ğ—¥ ğ—™ğ—”ğ—©ğ—¢ğ—¥*\n\n*ğ—¨ğ—¡ğ—”ğ—•ğ—Ÿğ—˜ ğ—§ğ—¢ ğ——ğ—¢ğ—ªğ—¡ğ—Ÿğ—¢ğ—”ğ—— ğ—§ğ—›ğ—˜ ğ—©ğ—¢ğ—œğ—–ğ—˜ ğ—¡ğ—¢ğ—§ğ—˜, ğ—§ğ—¥ğ—¬ ğ—”ğ—šğ—”ğ—œğ—¡ ğ—£ğ—Ÿğ—˜ğ—”ğ—¦ğ—˜*`
let audio = await toAudio(media, 'mp4')
if (!audio.data && !/audio/.test(mime)) throw `${lenguajeGB['smsAvisoFG']()}*ğ—¡ğ—¢ ğ—¦ğ—˜ ğ—Ÿğ—¢ğ—šğ—¥ğ—¢ ğ—–ğ—¢ğ—¡ğ—©ğ—˜ğ—¥ğ—§ğ—œğ—¥ ğ—¦ğ—¨ ğ—¡ğ—¢ğ—§ğ—” ğ——ğ—˜ ğ—©ğ—¢ğ—­ ğ—” ğ—”ğ—¨ğ——ğ—œğ—¢ ğ— ğ—£3, ğ—œğ—¡ğ—§ğ—˜ğ—¡ğ—§ğ—˜ ğ—¡ğ—¨ğ—˜ğ—©ğ—”ğ— ğ—˜ğ—¡ğ—§ğ—˜ ğ—£ğ—¢ğ—¥ ğ—™ğ—”ğ—©ğ—¢ğ—¥*\n\n*ğ—¨ğ—¡ğ—”ğ—¡ğ—Ÿğ—˜ ğ—§ğ—¢ ğ—–ğ—¢ğ—¡ğ—©ğ—˜ğ—¥ğ—§ ğ—¬ğ—¢ğ—¨ğ—¥ ğ—¡ğ—¢ğ—§ğ—˜ ğ—™ğ—¥ğ—¢ğ—  ğ—©ğ—¢ğ—œğ—–ğ—˜ ğ—§ğ—¢ ğ—”ğ—¨ğ——ğ—œğ—¢ ğ— ğ—£3, ğ—§ğ—¥ğ—¬ ğ—”ğ—šğ—”ğ—œğ—¡ ğ—£ğ—Ÿğ—˜ğ—”ğ—¦ğ—˜*`
if (!audio.data && !/video/.test(mime)) throw `${lenguajeGB['smsAvisoFG']()}*ğ—¡ğ—¢ ğ—¦ğ—˜ ğ—Ÿğ—¢ğ—šğ—¥ğ—¢ ğ—–ğ—¢ğ—¡ğ—©ğ—˜ğ—¥ğ—§ğ—œğ—¥ ğ—¦ğ—¨ ğ—©ğ—œğ——ğ—˜ğ—¢ ğ—” ğ—”ğ—¨ğ——ğ—œğ—¢ ğ— ğ—£3, ğ—œğ—¡ğ—§ğ—˜ğ—¡ğ—§ğ—˜ ğ—¡ğ—¨ğ—˜ğ—©ğ—”ğ— ğ—˜ğ—¡ğ—§ğ—˜ ğ—£ğ—¢ğ—¥ ğ—™ğ—”ğ—©ğ—¢ğ—¥*\n\n*ğ—¨ğ—¡ğ—”ğ—•ğ—Ÿğ—˜ ğ—§ğ—¢ ğ—–ğ—¢ğ—¡ğ—©ğ—˜ğ—¥ğ—§ ğ—¬ğ—¢ğ—¨ğ—¥ ğ—©ğ—œğ——ğ—˜ğ—¢ ğ—§ğ—¢ ğ—”ğ—¨ğ——ğ—œğ—¢ ğ— ğ—£3, ğ—§ğ—¥ğ—¬ ğ—”ğ—šğ—”ğ—œğ—¡ ğ—£ğ—Ÿğ—˜ğ—”ğ—¦ğ—˜*`
conn.sendFile(m.chat, audio.data, 'error.mp3', '', m, null, { mimetype: 'audio/mp4' })
}
handler.help = ['tomp3 (reply)']
handler.tags = ['audio']
handler.command = ['tomp3', 'toaudio', 'mp3']
export default handler
