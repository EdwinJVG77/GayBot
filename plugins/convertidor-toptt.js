import { toPTT } from '../lib/converter.js'
let handler = async (m, { conn, usedPrefix, command }) => {
let q = m.quoted ? m.quoted : m
let mime = (m.quoted ? m.quoted : m.msg).mimetype || ''
if (!/video|audio/.test(mime)) throw `${lenguajeGB['smsAvisoMG']()}*ğ—¥ğ—˜ğ—¦ğ—£ğ—¢ğ—¡ğ——ğ—˜ ğ—” ğ—¨ğ—¡ ğ—©ğ—œğ——ğ—˜ğ—¢ ğ—¢ ğ—”ğ—¨ğ——ğ—œğ—¢ ğ—£ğ—”ğ—¥ğ—” ğ—–ğ—¢ğ—¡ğ—©ğ—˜ğ—¥ğ—§ğ—œğ—¥ ğ—” ğ—¡ğ—¢ğ—§ğ—” ğ——ğ—˜ ğ—©ğ—¢ğ—­*\n\n*ğ—¥ğ—˜ğ—£ğ—Ÿğ—¬ ğ—§ğ—¢ ğ—”ğ—¡ ğ—©ğ—œğ——ğ—˜ğ—¢ ğ—¢ğ—¥ ğ—”ğ—¨ğ——ğ—œğ—¢ ğ—§ğ—¢ ğ—–ğ—¢ğ—¡ğ—©ğ—˜ğ—¥ğ—§ ğ—§ğ—¢ ğ—” ğ—©ğ—¢ğ—œğ—–ğ—˜ ğ—¡ğ—¢ğ—§ğ—˜*`
let media = await q.download?.()
if (!media && !/video/.test(mime)) throw `${lenguajeGB['smsAvisoFG']()}*ğ—¡ğ—¢ ğ—¦ğ—˜ ğ—Ÿğ—¢ğ—šğ—¥ğ—¢ ğ——ğ—˜ğ—¦ğ—–ğ—”ğ—¥ğ—šğ—”ğ—¥ ğ—˜ğ—Ÿ ğ—©ğ—œğ——ğ—˜ğ—¢, ğ—œğ—¡ğ—§ğ—˜ğ—¡ğ—§ğ—˜ ğ—¡ğ—¨ğ—˜ğ—©ğ—”ğ— ğ—˜ğ—¡ğ—§ğ—˜ ğ—£ğ—¢ğ—¥ ğ—™ğ—”ğ—©ğ—¢ğ—¥*\n\n*ğ—¨ğ—¡ğ—”ğ—•ğ—Ÿğ—˜ ğ—§ğ—¢ ğ——ğ—¢ğ—ªğ—¡ğ—Ÿğ—¢ğ—”ğ—— ğ—§ğ—›ğ—˜ ğ—©ğ—œğ——ğ—˜ğ—¢, ğ—§ğ—¥ğ—¬ ğ—”ğ—šğ—”ğ—œğ—¡ ğ—£ğ—Ÿğ—˜ğ—”ğ—¦ğ—˜*`
if (!media && !/audio/.test(mime)) throw `${lenguajeGB['smsAvisoFG']()}*ğ—¡ğ—¢ ğ—¦ğ—˜ ğ—Ÿğ—¢ğ—šğ—¥ğ—¢ ğ——ğ—˜ğ—¦ğ—–ğ—”ğ—¥ğ—šğ—”ğ—¥ ğ—˜ğ—Ÿ ğ—”ğ—¨ğ——ğ—œğ—¢, ğ—œğ—¡ğ—§ğ—˜ğ—¡ğ—§ğ—˜ ğ—¡ğ—¨ğ—˜ğ—©ğ—”ğ— ğ—˜ğ—¡ğ—§ğ—˜ ğ—£ğ—¢ğ—¥ ğ—™ğ—”ğ—©ğ—¢ğ—¥*\n\n*ğ—¨ğ—¡ğ—”ğ—•ğ—Ÿğ—˜ ğ—§ğ—¢ ğ——ğ—¢ğ—ªğ—¡ğ—Ÿğ—¢ğ—”ğ—— ğ—§ğ—›ğ—˜ ğ—”ğ—¨ğ——ğ—œğ—¢, ğ—§ğ—¥ğ—¬ ğ—”ğ—šğ—”ğ—œğ—¡ ğ—£ğ—Ÿğ—˜ğ—”ğ—¦ğ—˜*`
let audio = await toPTT(media, 'mp4')
if (!audio.data && !/audio/.test(mime)) throw `${lenguajeGB['smsAvisoFG']()}*ğ—¡ğ—¢ ğ—¦ğ—˜ ğ—Ÿğ—¢ğ—šğ—¥ğ—¢ ğ—–ğ—¢ğ—¡ğ—©ğ—˜ğ—¥ğ—§ğ—œğ—¥ ğ——ğ—˜ ğ—”ğ—¨ğ——ğ—œğ—¢ ğ—” ğ—¡ğ—¢ğ—§ğ—” ğ——ğ—˜ ğ—©ğ—¢ğ—­, ğ—œğ—¡ğ—§ğ—˜ğ—¡ğ—§ğ—˜ ğ—¡ğ—¨ğ—˜ğ—©ğ—”ğ— ğ—˜ğ—¡ğ—§ğ—˜ ğ—£ğ—¢ğ—¥ ğ—™ğ—”ğ—©ğ—¢ğ—¥*\n\n*ğ—–ğ—¢ğ—¨ğ—Ÿğ—— ğ—¡ğ—¢ğ—§ ğ—–ğ—¢ğ—¡ğ—©ğ—˜ğ—¥ğ—§ ğ—™ğ—¥ğ—¢ğ—  ğ—”ğ—¨ğ——ğ—œğ—¢ ğ—§ğ—¢ ğ—©ğ—¢ğ—œğ—–ğ—˜ ğ— ğ—˜ğ— ğ—¢, ğ—£ğ—Ÿğ—˜ğ—”ğ—¦ğ—˜ ğ—§ğ—¥ğ—¬ ğ—”ğ—šğ—”ğ—œğ—¡*`
if (!audio.data && !/video/.test(mime)) throw `${lenguajeGB['smsAvisoFG']()}*ğ—¡ğ—¢ ğ—¦ğ—˜ ğ—Ÿğ—¢ğ—šğ—¥ğ—¢ ğ—–ğ—¢ğ—¡ğ—©ğ—˜ğ—¥ğ—§ğ—œğ—¥ ğ——ğ—˜ ğ—©ğ—œğ——ğ—˜ğ—¢ ğ—” ğ—¡ğ—¢ğ—§ğ—” ğ——ğ—˜ ğ—©ğ—¢ğ—­, ğ—œğ—¡ğ—§ğ—˜ğ—¡ğ—§ğ—˜ ğ—¡ğ—¨ğ—˜ğ—©ğ—”ğ— ğ—˜ğ—¡ğ—§ğ—˜ ğ—£ğ—¢ğ—¥ ğ—™ğ—”ğ—©ğ—¢ğ—¥*\n\n*ğ—–ğ—¢ğ—¨ğ—Ÿğ—— ğ—¡ğ—¢ğ—§ ğ—–ğ—¢ğ—¡ğ—©ğ—˜ğ—¥ğ—§ ğ—™ğ—¥ğ—¢ğ—  ğ—©ğ—œğ——ğ—˜ğ—¢ ğ—§ğ—¢ ğ—©ğ—¢ğ—œğ—–ğ—˜ ğ— ğ—˜ğ— ğ—¢, ğ—£ğ—Ÿğ—˜ğ—”ğ—¦ğ—˜ ğ—§ğ—¥ğ—¬ ğ—”ğ—šğ—”ğ—œğ—¡*`
conn.sendFile(m.chat, audio.data, 'error.mp3', '', m, true, { mimetype: 'audio/mp4' })
}
handler.help = ['tovn (reply)']
handler.tags = ['audio']
handler.command = /^tovn|vn|ptt$/i
export default handler
